[
  {
    "id": "20603550-1ae8-497a-b77a-444d65683fcb",
    "name": "Ввод текста",
    "type": "code",
    "inputs": [
      {
        "name": "text",
        "type": "string",
        "schema": {
          "type": "string",
          "title": "Введённый текст"
        }
      }
    ],
    "outputs": [
      {
        "name": "text",
        "type": "string",
        "schema": {
          "type": "string",
          "title": "Введённый текст"
        }
      }
    ],
    "config": {
      "defaultText": "Пример"
    },
    "configSchema": {
      "type": "object",
      "properties": {
        "defaultText": {
          "type": "string",
          "title": "Текст по умолчанию"
        }
      }
    },
    "code": {
      "language": "javascript",
      "sourceCode": "return { text: text ?? config.defaultText };"
    }
  },
  {
    "id": "9c937d7d-3b9d-4a1e-81ff-53b637b243a1",
    "name": "К верхнему регистру",
    "type": "code",
    "inputs": [
      {
        "name": "text",
        "type": "string",
        "schema": {
          "type": "string"
        }
      }
    ],
    "outputs": [
      {
        "name": "upperText",
        "type": "string",
        "schema": {
          "type": "string"
        }
      }
    ],
    "config": {},
    "configSchema": {
      "type": "object",
      "properties": {}
    },
    "code": {
      "language": "javascript",
      "sourceCode": "return { upperText: text.toUpperCase() };"
    }
  },
  {
    "id": "40df04f6-975d-4672-8b3c-5eb8c41418f5",
    "name": "Проверка длины > N",
    "type": "code",
    "inputs": [
      {
        "name": "text",
        "type": "string",
        "schema": {
          "type": "string"
        }
      }
    ],
    "outputs": [
      {
        "name": "isLong",
        "type": "boolean",
        "schema": {
          "type": "boolean"
        }
      }
    ],
    "config": {
      "minLength": 5
    },
    "configSchema": {
      "type": "object",
      "properties": {
        "minLength": {
          "type": "number",
          "title": "Минимальная длина"
        }
      }
    },
    "code": {
      "language": "javascript",
      "sourceCode": "return { isLong: text.length > config.minLength };"
    }
  },
  {
    "id": "24380a14-ca57-4afc-a50b-0246fd15816f",
    "name": "Условие (if)",
    "type": "condition",
    "inputs": [
      {
        "name": "flag",
        "type": "boolean",
        "schema": {
          "type": "boolean"
        }
      }
    ],
    "outputs": [
      {
        "name": "onTrue",
        "type": "string",
        "schema": {
          "type": "string"
        }
      },
      {
        "name": "onFalse",
        "type": "string",
        "schema": {
          "type": "string"
        }
      }
    ],
    "config": {
      "trueMessage": "Истина",
      "falseMessage": "Ложь"
    },
    "configSchema": {
      "type": "object",
      "properties": {
        "trueMessage": {
          "type": "string",
          "title": "Сообщение при истине"
        },
        "falseMessage": {
          "type": "string",
          "title": "Сообщение при лжи"
        }
      }
    },
    "code": {
      "language": "javascript",
      "sourceCode": "return flag ? { onTrue: config.trueMessage } : { onFalse: config.falseMessage };"
    }
  },
  {
    "id": "4099088f-9d42-4ea4-8fbb-c84cc97278d7",
    "name": "Цикл по массиву",
    "type": "loop",
    "inputs": [
      {
        "name": "items",
        "type": "array",
        "schema": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    ],
    "outputs": [
      {
        "name": "looped",
        "type": "array",
        "schema": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    ],
    "config": {
      "suffix": "_обработано"
    },
    "configSchema": {
      "type": "object",
      "properties": {
        "suffix": {
          "type": "string",
          "title": "Суффикс"
        }
      }
    },
    "code": {
      "language": "javascript",
      "sourceCode": "const processed = items.map(i => i + config.suffix); return { looped: processed };"
    }
  },
  {
    "id": "922b48b6-4e87-4a49-a5ec-eaa2845c8fd0",
    "name": "API вызов",
    "type": "api_call",
    "inputs": [
      {
        "name": "payload",
        "type": "object",
        "schema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string"
            }
          },
          "required": [
            "query"
          ]
        }
      }
    ],
    "outputs": [
      {
        "name": "result",
        "type": "object",
        "schema": {
          "type": "object"
        }
      }
    ],
    "config": {
      "method": "POST",
      "url": "https://api.example.com/search",
      "headers": {
        "Authorization": ""
      }
    },
    "configSchema": {
      "type": "object",
      "title": "Настройка API вызова",
      "properties": {
        "url": {
          "type": "string",
          "title": "URL запроса"
        },
        "method": {
          "type": "string",
          "enum": [
            "GET",
            "POST"
          ],
          "title": "Метод"
        },
        "headers": {
          "type": "object",
          "title": "Заголовки",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "required": [
        "url",
        "method"
      ]
    },
    "code": {
      "language": "javascript",
      "sourceCode": "// mock API call\nreturn { result: { data: 'ответ' } };"
    }
  },
  {
    "id": "b8967c09-fdb7-4032-b9e8-5d13aae15965",
    "name": "LLM вызов",
    "type": "code",
    "description": "Отправляет текст в LLM и возвращает ответ",
    "inputs": [
      {
        "name": "prompt",
        "type": "string",
        "schema": {
          "type": "string",
          "title": "Промпт"
        }
      }
    ],
    "outputs": [
      {
        "name": "completion",
        "type": "string",
        "schema": {
          "type": "string",
          "title": "Ответ модели"
        }
      }
    ],
    "config": {
      "apiKey": "sk-to8ADu5fQYxpAd_BOcshlOCeuXHlWVTVGkCc_OzjdIT3BlbkFJKP-xTU231BP1-2N5fWGnl5xT4EM6XPr6if-VKpUL8A",
      "model": "gpt-3.5-turbo"
    },
    "configSchema": {
      "type": "object",
      "properties": {
        "apiKey": {
          "type": "string",
          "title": "API ключ OpenAI"
        },
        "model": {
          "type": "string",
          "title": "ID модели"
        }
      },
      "required": [
        "apiKey",
        "model"
      ]
    },
    "code": {
      "language": "javascript",
      "sourceCode": "const response = await fetch('https://api.openai.com/v1/chat/completions', { method: 'POST',  headers: { 'Authorization': 'Bearer ' + config.apiKey,  'Content-Type': 'application/json'  }, body: JSON.stringify({    model: config.model,  messages: [{ role: 'user', content: prompt }]})});const data = await response.json();console.log('data',data) ;if (data?.error?.message){throw new Error(data?.error?.message)} return { completion: data.choices?.[0].message.content ||'qq' };"
    }
  }
]